{
    "resourceSpecId": "22222222-2222-4222-8222-222222222222",
    "stableId": "main-redis",
    "displayName": "Main Redis Cluster",
    "resourceType": "cache.elasticache",
    "vpcDependency": "required",
    "status": "draft",
    "inputs": {
        "cluster_id": "sigmoid-redis",
        "engine": "redis",
        "engine_version": "7.1",
        "node_type": "cache.r6g.large",
        "num_cache_nodes": 2,
        "subnet_group_name": { "ref": "cache-subnet-group.name", "required": true },
        "security_group_ids": [
            { "ref": "redis-sg.id", "required": true }
        ],
        "parameter_group_name": "default.redis7",
        "port": 6379,
        "automatic_failover_enabled": true,
        "multi_az_enabled": true,
        "snapshot_retention_limit": 7,
        "snapshot_window": "03:00-04:00",
        "maintenance_window": "sun:05:00-sun:06:00",
        "at_rest_encryption_enabled": true,
        "transit_encryption_enabled": true,
        "auth_token": { "ref": "secrets.redis_auth_token", "required": true, "sensitive": true },
        "apply_immediately": false
    },
    "inputSpecs": [
        { "name": "cluster_id", "type": "string", "required": true },
        { "name": "engine", "type": "string", "required": true },
        { "name": "engine_version", "type": "string", "required": false },
        { "name": "node_type", "type": "string", "required": true },
        { "name": "num_cache_nodes", "type": "number", "required": false, "default": 1 },
        { "name": "subnet_group_name", "type": "string", "required": true },
        { "name": "security_group_ids", "type": "array", "required": false },
        { "name": "parameter_group_name", "type": "string", "required": false },
        { "name": "port", "type": "number", "required": false },
        { "name": "automatic_failover_enabled", "type": "boolean", "required": false, "default": false },
        { "name": "multi_az_enabled", "type": "boolean", "required": false, "default": false },
        { "name": "snapshot_retention_limit", "type": "number", "required": false, "default": 0 },
        { "name": "snapshot_window", "type": "string", "required": false },
        { "name": "maintenance_window", "type": "string", "required": false },
        { "name": "at_rest_encryption_enabled", "type": "boolean", "required": false, "default": true },
        { "name": "transit_encryption_enabled", "type": "boolean", "required": false, "default": true },
        { "name": "auth_token", "type": "string", "required": false },
        { "name": "apply_immediately", "type": "boolean", "required": false, "default": false }
    ],
    "scope": {
        "vpcId": "main-vpc"
    },
    "position": { "x": 500, "y": 300 },
    "terraform": {
        "module": {
            "source": "../../terraform-modules/terraform-aws-elasticache"
        }
    }
}
